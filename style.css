/* Configuración general */
body {
    margin: 0;
    padding: 0;
    background: linear-gradient(to bottom, #ffe6e9, #fff0f3);
    font-family: 'Nunito', sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    overflow: hidden;
}

/* Pantalla de inicio */
.start-screen {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    display: flex; flex-direction: column;
    justify-content: center; align-items: center;
    background-color: #ffe6e9; z-index: 100;
    transition: opacity 0.8s ease-out;
}
.pulse-heart { font-size: 6rem; cursor: pointer; animation: pulse 1.5s infinite; }
.click-text { font-family: 'Dancing Script', cursive; font-size: 2rem; color: #d63384; margin-top: 20px; }
@keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }

/* Contenedor Principal */
.main-container {
    display: flex;
    align-items: center;
    justify-content: center; /* Inicialmente centrado */
    width: 90%; max-width: 900px;
    transition: all 1s ease-in-out;
}

/* Grupo de Texto */
.text-group {
    flex: 1;
    text-align: left;
    padding-right: 30px;
    opacity: 0;
    transform: translateX(-50px); /* Empieza un poco a la izquierda */
    transition: all 1s ease-in-out;
}
/* Clase para mostrar el texto y mover el árbol */
.show-text-group {
    opacity: 1;
    transform: translateX(0);
}

/* Clases de utilidad */
.hidden-element { opacity: 0; }
.visible { opacity: 1; }

/* Textos y Máquina de Escribir */
.title { font-family: 'Dancing Script', cursive; font-size: 2.8rem; color: #d63384; margin-bottom: 15px; min-height: 1.2em; }
.subtitle, .message { color: #555; font-size: 1.2rem; min-height: 1.2em; }
.typewriter {
    border-right: 3px solid rgba(214, 51, 132, 0.7);
    white-space: nowrap; overflow: hidden; display: inline-block;
    animation: blink-caret 0.75s step-end infinite;
}
@keyframes blink-caret { from, to { border-color: transparent } 50% { border-color: rgba(214, 51, 132, 0.7); } }

/* Contador */
.timer-container { margin: 30px 0; transition: opacity 1s ease; }
.timer {
    font-size: 1.5rem; font-weight: bold; color: #a81d56;
    background: rgba(255, 255, 255, 0.8); padding: 15px 30px;
    border-radius: 30px; display: inline-block;
    box-shadow: 0 5px 20px rgba(214, 51, 132, 0.2);
}

/* --- EL ÁRBOL --- */
.tree-wrapper {
    flex: 1;
    display: flex; justify-content: center;
    transition: all 1s ease-in-out;
}
/* Cuando el texto aparece, el árbol se ajusta */
.text-group.show-text-group + .tree-wrapper {
    flex: 0 0 auto; /* Deja de ser flexible para dar espacio al texto */
}

.tree-container {
    position: relative; width: 400px; height: 500px;
    /* border: 1px solid red; Descomenta para ver el área del árbol */
}

/* Tronco Animado */
.trunk {
    position: absolute; bottom: 0; left: 50%;
    width: 20px; height: 250px;
    background: linear-gradient(to right, #8B4513, #A0522D);
    border-radius: 10px 10px 0 0;
    transform-origin: bottom center;
    transform: translateX(-50%) scaleY(0); /* Empieza aplastado */
}
.grow-trunk { animation: grow-trunk-anim 1.5s forwards ease-out; }
@keyframes grow-trunk-anim { to { transform: translateX(-50%) scaleY(1); } }

/* Ramas (simplificadas para la animación) */
.branches {
    position: absolute; bottom: 250px; left: 50%;
    width: 2px; height: 2px;
}

/* Hojas de Corazón */
.heart {
    position: absolute; width: 24px; height: 24px;
    transform: rotate(-45deg) scale(0); opacity: 0.9;
    transition: transform 0.8s ease-out;
}
.heart::before, .heart::after {
    content: ""; position: absolute; width: 24px; height: 24px; border-radius: 50%;
}
.heart::before { top: -12px; left: 0; }
.heart::after { left: 12px; top: 0; }

.bloom { transform: rotate(-45deg) scale(var(--scale)); }

/* Hojas Cayendo */
.falling-heart {
    position: absolute; width: 16px; height: 16px;
    transform: rotate(-45deg); opacity: 0; z-index: 1;
    animation: fall-anim 5s linear forwards;
}
.falling-heart::before, .falling-heart::after {
    content: ""; position: absolute; width: 16px; height: 16px; border-radius: 50%;
}
.falling-heart::before { top: -8px; left: 0; }
.falling-heart::after { left: 8px; top: 0; }
@keyframes fall-anim {
    0% { top: 100px; opacity: 1; transform: rotate(-45deg) translateX(0) rotateZ(0); }
    100% { top: 550px; opacity: 0; transform: rotate(45deg) translateX(50px) rotateZ(360deg); }
}
